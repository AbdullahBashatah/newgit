(()=>{"use strict";const t=(t,e,n)=>{let r=0;for(;e<n;)r*=83,r+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz#$%*+,-.:;=?@[]^_{|}~".indexOf(t[e++]);return r},e=Math.pow,n=Math.PI,r=2*n,o=3294.6,a=269.025,u=t=>t>10.31475?e(t/a+.052132,2.4):t/o,c=t=>~~(t>1227e-8?a*e(t,.416666)-13.025:t*o+1),f=t=>(t<0?-1:1)*t*t,s=t=>{for(t+=n/2;t>n;)t-=r;const e=1.27323954*t-.405284735*f(t);return.225*(f(e)-e)+e},d=document.getElementById("blurhash"),l=document.getElementById("canvas").getContext("2d");function i(){const e=d.value;if(!e)return;const r=function(e,r,o,a){const d=t(e,0,1),l=d%9+1,i=1+~~(d/9),m=l*i,g=(t(e,1,2)+1)/13446*1,I=new Float64Array(3*m);let h=t(e,2,6);I[0]=u(h>>16),I[1]=u(h>>8&255),I[2]=u(255&h);let p=0,w=0,y=0,v=0,E=0,x=0,A=0,B=0,C=0,D=0,M=0,b=0,F=0;for(p=1;p<m;p++)h=t(e,4+2*p,6+2*p),I[3*p]=f(~~(h/361)-9)*g,I[3*p+1]=f(~~(h/19)%19-9)*g,I[3*p+2]=f(h%19-9)*g;const L=new Uint8ClampedArray(4096);for(v=0;v<32;v++)for(b=n*v/32,y=0;y<32;y++){for(E=0,x=0,A=0,F=n*y/32,w=0;w<i;w++)for(C=s(b*w),p=0;p<l;p++)B=s(F*p)*C,D=3*(p+w*l),E+=I[D]*B,x+=I[D+1]*B,A+=I[D+2]*B;M=4*y+128*v,L[M]=c(E),L[M+1]=c(x),L[M+2]=c(A),L[M+3]=255}return L}(e),o=new ImageData(r,32,32);l.putImageData(o,0,0)}d.addEventListener("input",i),i()})();